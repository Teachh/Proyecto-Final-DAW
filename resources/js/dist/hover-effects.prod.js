"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("three"),require("gsap/TweenMax")):"function"==typeof define&&define.amd?define(["three","gsap/TweenMax"],t):e.hoverEffect=t(e.THREE,e.TweenMax)}(void 0,function(U,C){return C=C&&C.hasOwnProperty("default")?C.default:C,function(e){function t(){for(var e=arguments,t=0;t<arguments.length;t++)if(void 0!==e[t])return e[t]}console.log("%c Hover effect by Robin Delaporte: https://github.com/robin-dela/hover-effect ","color: #bada55; font-size: 0.8rem");var n=e.parent,i=e.displacementImage,o=e.image1,r=e.image2,a=t(e.imagesRatio,1),s=t(e.intensity1,e.intensity,1),f=t(e.intensity2,e.intensity,1),l=t(e.angle,Math.PI/4),d=t(e.angle1,l),u=t(e.angle2,3*-l),m=t(e.speedIn,e.speed,1.6),p=t(e.speedOut,e.speed,1.2),c=t(e.hover,!0),v=t(e.easing,Expo.easeOut),g=t(e.video,!1);if(n)if(o&&r&&i){var y=new U.Scene,h=new U.OrthographicCamera(n.offsetWidth/-2,n.offsetWidth/2,n.offsetHeight/2,n.offsetHeight/-2,1,1e3);h.position.z=1;var x=new U.WebGLRenderer({antialias:!1,alpha:!0});x.setPixelRatio(2),x.setClearColor(16777215,0),x.setSize(n.offsetWidth,n.offsetHeight),n.appendChild(x.domElement);var F=function(){x.render(y,h)},w=new U.TextureLoader;w.crossOrigin="";var L,H,b=w.load(i,F);if(b.magFilter=b.minFilter=U.LinearFilter,g){(function e(){requestAnimationFrame(e),x.render(y,h)})(),(g=document.createElement("video")).autoplay=!0,g.loop=!0,g.src=o,g.load();var E=document.createElement("video");E.autoplay=!0,E.loop=!0,E.src=r,E.load();var W=new U.VideoTexture(g),V=new U.VideoTexture(E);W.magFilter=V.magFilter=U.LinearFilter,W.minFilter=V.minFilter=U.LinearFilter,E.addEventListener("loadeddata",function(){E.play(),(V=new U.VideoTexture(E)).magFilter=U.LinearFilter,V.minFilter=U.LinearFilter,P.uniforms.texture2.value=V},!1),g.addEventListener("loadeddata",function(){g.play(),(W=new U.VideoTexture(g)).magFilter=U.LinearFilter,W.minFilter=U.LinearFilter,P.uniforms.texture1.value=W},!1)}else W=w.load(o,F),V=w.load(r,F),W.magFilter=V.magFilter=U.LinearFilter,W.minFilter=V.minFilter=U.LinearFilter;var M=a;H=n.offsetHeight/n.offsetWidth<M?(L=1,n.offsetHeight/n.offsetWidth/M):(L=n.offsetWidth/n.offsetHeight*M,1);var P=new U.ShaderMaterial({uniforms:{intensity1:{type:"f",value:s},intensity2:{type:"f",value:f},dispFactor:{type:"f",value:0},angle1:{type:"f",value:d},angle2:{type:"f",value:u},texture1:{type:"t",value:W},texture2:{type:"t",value:V},disp:{type:"t",value:b},res:{type:"vec4",value:new U.Vector4(n.offsetWidth,n.offsetHeight,L,H)},dpr:{type:"f",value:window.devicePixelRatio}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"\nvarying vec2 vUv;\n\nuniform float dispFactor;\nuniform float dpr;\nuniform sampler2D disp;\n\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float angle1;\nuniform float angle2;\nuniform float intensity1;\nuniform float intensity2;\nuniform vec4 res;\nuniform vec2 parent;\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n  return mat2(c, -s, s, c);\n}\n\nvoid main() {\n  vec4 disp = texture2D(disp, vUv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n\n  vec2 uv = 0.5 * gl_FragCoord.xy / (res.xy) ;\n  vec2 myUV = (uv - vec2(0.5))*res.zw + vec2(0.5);\n\n\n  vec2 distortedPosition1 = myUV + getRotM(angle1) * dispVec * intensity1 * dispFactor;\n  vec2 distortedPosition2 = myUV + getRotM(angle2) * dispVec * intensity2 * (1.0 - dispFactor);\n  vec4 _texture1 = texture2D(texture1, distortedPosition1);\n  vec4 _texture2 = texture2D(texture2, distortedPosition2);\n  gl_FragColor = mix(_texture1, _texture2, dispFactor);\n}\n",transparent:!0,opacity:1}),S=new U.PlaneBufferGeometry(n.offsetWidth,n.offsetHeight,1),_=new U.Mesh(S,P);y.add(_),c&&(n.addEventListener("mouseenter",R),n.addEventListener("touchstart",R),n.addEventListener("mouseleave",T),n.addEventListener("touchend",T)),window.addEventListener("resize",function(e){H=n.offsetHeight/n.offsetWidth<M?(L=1,n.offsetHeight/n.offsetWidth/M):(L=n.offsetWidth/n.offsetHeight*M,1),_.material.uniforms.res.value=new U.Vector4(n.offsetWidth,n.offsetHeight,L,H),x.setSize(n.offsetWidth,n.offsetHeight),F()}),this.next=R,this.previous=T}else console.warn("One or more images are missing");else console.warn("Parent missing");function R(){C.to(P.uniforms.dispFactor,m,{value:1,ease:v,onUpdate:F,onComplete:F})}function T(){C.to(P.uniforms.dispFactor,p,{value:0,ease:v,onUpdate:F,onComplete:F})}}});